<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee House</title>
    <link rel="shortcut icon" href="./assets/img/logo.webp" type="">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/grid.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;display=swap&amp;subset=vietnamese" rel="stylesheet">
    <link rel="stylesheet" href="./assets/icon/fontawesome-free-6.2.0-web/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main">
        <div class="header">
            <div class="header_img">
                <img src="/assets/img/slider_1.webp" alt="" class="header_img-main">
            </div>

            <nav class="navbar">
                <div class="navbar_logo">
                    <img src="./assets/img/logo.webp" alt="Logo">
                </div>
                <ul class="navbar_menu">
                    <li><a href="#">Trang chủ</a></li>
                    <li><a href="#">Giới thiệu</a></li>
                    <li class="dropdown">
                        <a href="#">Sản phẩm</a>
                        <ul class="dropdown_content">
                            <li><a href="#">Cà phê thế giới</a></li>
                            <li><a href="#">Cà phê pha Việt</a></li>
                            <li><a href="#">Cà phê cảm hứng</a></li>
                            <li><a href="#">Đồ uống</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Dịch vụ</a></li>
                    <li><a href="#">Tin tức</a></li>
                    <li><a href="#">Liên hệ</a></li>
                </ul>
                <div class="navbar_icons">
                    <div class="dropdown">
                        <a href="#"><i class="fa-solid fa-user"></i></a>
                        <div class="dropdown_content">
                            <ul>
                                <li><a href="information-user.html">Thông tin cá nhân</a></li>
                                <li><a href="/logout">Đăng xuất</a></li>
                            </ul>
                        </div>
                    </div>
                    <a href="#"><i class="fa fa-search"></i></a>
                    <a href="#"><i class="fa fa-shopping-cart"></i></a>
                </div>
            </nav>
        </div>

        <div class="sub_header">
            <div class="gird wide">
                <div class="row">
                    <div class="col c-5">
                        <div class="module_left a-center">
                            <div class="heading">
                                <h2 class="large_title">Chúng tôi là</h2>
                                <span class="mini_title">Coffee house</span>
                            </div>
                            <div class="day_time">
                                Thứ hai đến Thứ bảy <b>8:30am - 11:00pm</b> <span class="hidden-xs">|</span> 
                                Hotline: 
                                <a href="tel:19006750">19006750</a>
                            </div>
                            <span>Chúng tôi đi khắp thế giới để tìm kiếm cà phê tuyệt vời. Trong quá trình đó, chúng tôi phát hiện ra những hạt đậu đặc biệt và hiếm đến nỗi chúng tôi có thể chờ đợi để mang chúng về.</span>
                        </div>
                    </div>
    
                    <div class="col c-7">
                        <div class="module_right a-center">
                            <img class="lazyload loaded" src="//bizweb.dktcdn.net/100/346/521/themes/894784/assets/bg_about.png?1676262120822" data-src="//bizweb.dktcdn.net/100/346/521/themes/894784/assets/bg_about.png?1676262120822" alt="Coffee House" data-was-processed="true">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <section class="section_menu_today">
            <div class="container">
                <div class="heading">
                    <h2 class="large_title">Chúng tôi là</h2>
                    <span class="mini_title">Coffee house</span>
                </div>
            </div>

            <div class="products">
                <div class="row">
                    <div class="product-list" id="product-list">
                        <!-- Products will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>

            <div id="pagination" class="pagination">
                <!-- Buttons will be dynamically inserted here -->
            </div>
        </section>

        <div class="section_hours_book form_contact_footer">
            <div class="row">
                <div class="col c-5">
                    <div class="module_left a-center">
                        <div class="heading hd1">
                            <h2 class="large_title">Giờ mở cửa</h2>
                        </div>
                        <div class="content_hour">
                            <p class="option_1">Thứ 2 - Thứ 6 hàng tuần</p>
                            <span>7am - 11am</span><br>
                            <span>11am - 10pm</span>
                            <p class="option_2">Thứ 7, Chủ nhật hàng tuần</p>
                            <span>8am - 1 am</span><br>
                            <span>11am - 9pm</span>
                        </div>
                        <div class="hotline_hour">
                            <div class="sdt">Số điện thoại</div>
                            <a href="tel:19006750">19006750</a>
                        </div>
                    </div>
                </div>
                <div class="col c-7">
                    <div class="module_right a-center">
                        <img src="//bizweb.dktcdn.net/100/346/521/themes/894784/assets/banner-hours-book.png?1664353170155" alt="Coffee House">
                    </div>
                </div>
            </div>
        </div>
        
    <script>
        let currentPage = 0;  // Start at page 0
        const pageSize = 10;  // Number of products per page

async function loadProducts(page = 0, size = 10) {
    try {
        // Fetch products from API
        const response = await fetch(`http://localhost:8080/api/v1/product/get-products?page=${page}&size=${size}`);
        const data = await response.json();
        
        // Check if data is properly returned
        if (!data || !data.content) {
            return;
        }
        
        const products = data.content;  // Actual product data
        const productList = document.getElementById('product-list');
        productList.innerHTML = ''; // Clear the previous content

        // Loop through products and create product elements
        products.forEach(product => {
            const productItem = document.createElement('div');
            productItem.classList.add('product-item');

            productItem.innerHTML = `
                <div class="product-image">
                    <img src="${product.image}" alt="${product.name}">
                </div>
                <div class="product-info">
                    <h3>${product.name}</h3>
                    <p>Giá: ${product.price.toLocaleString('vi-VN')}₫</p>
                </div>
            `;

            productItem.addEventListener('click', () => {
                window.location.href = `/product/${product.productId}`; // Redirect to the product details page
            });

            productList.appendChild(productItem);
        });

        // Handle pagination controls (Next/Previous buttons)
        updatePagination(data);
    } catch (error) {
        console.error('Error loading products:', error);
    }
}

function updatePagination(data) {
    const paginationElement = document.getElementById('pagination');
    paginationElement.innerHTML = ''; // Clear the old pagination UI

    // "Previous" button
    const prevButton = document.createElement('button');
    prevButton.innerText = 'Previous';
    prevButton.disabled = data.number === 0; // Disable if it's the first page
    prevButton.onclick = () => loadProducts(data.number - 1, pageSize);
    paginationElement.appendChild(prevButton);

    // "Next" button
    const nextButton = document.createElement('button');
    nextButton.innerText = 'Next';
    nextButton.disabled = data.number >= data.totalPages - 1; // Disable if it's the last page
    nextButton.onclick = () => loadProducts(data.number + 1, pageSize);
    paginationElement.appendChild(nextButton);

    // Log for debugging
    console.log('Pagination:', {
        currentPage: data.number,
        totalPages: data.totalPages,
    });

    // Set the current page
    currentPage = data.number;
}
// Load the first page when the window loads
window.onload = () => loadProducts(currentPage, pageSize);

    </script>
</body>
</html>